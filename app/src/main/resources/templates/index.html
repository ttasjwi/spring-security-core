<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Spring Security Test Page</title>
</head>
<body>
<h2>Spring Security 요청 테스트</h2>
<a href="/login">로그인</a>
<a href="/logout">로그아웃</a>
<button onclick="getAndAlertResult('/user')">User 페이지 접근</button>
<button onclick="getAndAlertResult('/myPage/points')">MyPage 페이지 접근</button>
<button onclick="getAndAlertResult('/manager')">Manager 페이지 접근</button>
<button onclick="getAndAlertResult('/admin/payment')">Admin Payment 접근</button>
<button onclick="getAndAlertResult('/admin')">Admin 페이지 접근</button>
<button onclick="getAndAlertResult('/resource/address_01')">인증자 페이지 접근</button>
<button onclick="getAndAlertResult('/resource/address01')">Manager 페이지 접근</button>
<button onclick="postAndAlertResult()">POST 요청 보내기</button>

<script>
    /**
     * url로 get 요청을 보내고 결과를 alert를 통해 출력
     * @param url
     */
    function getAndAlertResult(url) {
        fetch(url)
            .then(response => {
                if (!response.ok) throw new Error('Request failed');
                return response.text();
            })
            .then(data => alert('Response: ' + data))
            .catch(error => alert('Error: ' + error));
    }

    /**
     * "/post"로 post 요청을 보내고 결과를 alert를 통해 출력
     */
    function postAndAlertResult() {
        fetch('/post', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                // 'Authorization': 'Bearer YOUR_TOKEN_HERE' // 필요한 경우 인증 토큰 추가
            },
            body: JSON.stringify({ data: 'yourDataHere' })
        })
            .then(response => {
                if (!response.ok) throw new Error('Post request failed');
                return response.text();
            })
            .then(data => alert('Post Response: ' + data))
            .catch(error => alert('Post Error: ' + error));
    }
</script>
</body>
</html>
